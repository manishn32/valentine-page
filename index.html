<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For You ‚ù§Ô∏è</title>

<style>
html, body {
margin: 0;
padding: 0;
height: 100%;
font-family: Arial;
background-image: url('her.JPG');
background-size: cover;
background-position: center;
display: flex;
justify-content: center;
align-items: center;
}

/* ENVELOPE */
.envelope {
width: 260px;
height: 180px;
background: #f5c6d6;
position: relative;
cursor: pointer;
border-radius: 8px;
box-shadow: 0 10px 30px rgba(0,0,0,0.3);
transition: opacity 0.6s ease;
}

.flap {
width: 0;
height: 0;
border-left: 130px solid transparent;
border-right: 130px solid transparent;
border-bottom: 90px solid #ff9ab5;
position: absolute;
top: 0;
left: 0;
transform-origin: top;
transition: transform 0.6s;
}

.letter {
position: absolute;
top: 20px;
left: 10px;
width: 240px;
height: 140px;
background: white;
border-radius: 10px;
text-align: center;
padding-top: 10px;
display: none;
}

/* OPEN STATE */
.open .flap {
transform: rotateX(180deg);
}

.open .letter {
display: block;
}

button {
padding: 8px 14px;
margin: 6px;
border-radius: 16px;
border: none;
cursor: pointer;
}

#yesBtn { background: #4CAF50; color: white; }
#noBtn { background: #f44336; color: white; }
</style>
</head>

<body>

<div class="envelope" id="envelope" onclick="openEnvelope()">
<div class="flap"></div>

<div class="letter" id="letter">
<h3 id="title">Will You Be My Valentine? ‚ù§Ô∏è</h3>
<button id="yesBtn" onclick="saveResponse('YES'); event.stopPropagation();">Yes</button>
<button id="noBtn" onclick="saveResponse('NO'); event.stopPropagation();">No</button>
</div>
</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  
import { getFirestore, collection, addDoc }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

/* üîΩ PASTE YOUR FIREBASE CONFIG HERE */
const firebaseConfig = {
   apiKey: "AIzaSyAt_RwhWPoBXVL8RNMMVXRckc4GCVFcRWw",
   authDomain: "valentine-c63b3.firebaseapp.com",
   projectId: "valentine-c63b3",
   storageBucket: "valentine-c63b3.firebasestorage.app",
   messagingSenderId: "406251981974",
   appId: "1:406251981974:web:af03ce19b021a2e2a446b7"
  };

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let noCount = 0;

function openEnvelope() {
document.getElementById("envelope").classList.add("open");
}

function saveResponse(answer) {
db.collection("responses").add({
answer: answer,
time: new Date()
});

if (answer === "YES") {
fadeEnvelope();
} else {
handleNo();
}
}

function fadeEnvelope() {
const env = document.getElementById("envelope");
env.style.opacity = "0";
setTimeout(() => {
env.style.display = "none";
}, 600);
}

function handleNo() {
noCount++;
const title = document.getElementById("title");
const letter = document.getElementById("letter");

if (noCount === 1) {
shake(letter);
}
else if (noCount === 2) {
title.innerText = "Please don‚Äôt abandon me ü•∫";
}
else if (noCount === 3) {
title.innerText = "Love, please come with me ‚ù§Ô∏è";
}
else {
title.innerText =
"Life will have so many ups and downs, this is the only down for us I promise üíû";
}
}

function shake(element) {
element.animate([
{ transform: 'translateX(0px)' },
{ transform: 'translateX(-12px)' },
{ transform: 'translateX(12px)' },
{ transform: 'translateX(-12px)' },
{ transform: 'translateX(12px)' },
{ transform: 'translateX(0px)' }
], { duration: 400 });
}
</script>

</body>
</html>
